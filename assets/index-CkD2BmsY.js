const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/time-zones-Ddu0PvRY.js","assets/index-p4VH55K1-e5RoWDws.js","assets/index-DFrluMIY.js","assets/index-mL0evDQ4.js","assets/region-BWroGId0.js","assets/index-g4YtFzIU.js"])))=>i.map(i=>d[i]);
import"./index-aoldBnRi.js";import"./index-CT0mnDVG.js";import"./index-q6Yrc1w0.js";import"./index-DjT8kxHy.js";import"./index-CjLav9-F.js";import"./index-DHyXE03C.js";import{L as M,b as g,dN as V,E as $,x as y,s as k,i as U,_ as b,S as A}from"./index-Cq4wNgzh.js";import{n as N}from"./ref-Be9bjbbE.js";import{c as L}from"./repeat-DwzMTQwr.js";import{i as G}from"./keyed-DA__CVD4.js";import{v as W,T as q}from"./label-GTT-Um3T.js";import{m as j,p as Q}from"./interactive-CAv6En_k.js";import{m as H}from"./component-DhwE6u-3.js";import{D as J,O as K,W as X,B as Y}from"./form-0-mqf3fe.js";import{s as ee}from"./useT9n-DCz-Ej42.js";import{Q as te}from"./locale-BZ36-s7O.js";import"./dom-C7aYq3kq.js";import"./observers-CyRF7HMQ.js";import"./logger-DQzfqiMp.js";import"./key-ak3_eHKH.js";import"./live-BuMfIF_f.js";import"./directive-helpers-Z67aUjvU.js";import"./core-Cxbbqyjy.js";import"./filter-pONmcIs3.js";import"./debounce-DbkufipY.js";import"./floating-ui-NjtmjWne.js";import"./guid-BDWAkmkV.js";import"./openCloseComponent-BlLepHob.js";import"./Validation-DMP_l3xG.js";import"./utils3-B9_t1E4_.js";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */const ie={offset:"offset"},oe=60;function x(i){return i.replace(":15",".25").replace(":30",".5").replace(":45",".75").replace("âˆ’","-")}function ae(i,e){const t=w(i,"en-US",e).replace("GMT","");return t===""?0:Number(x(t))*oe}function se(){return new Date().getTimezoneOffset()*-1}function ne(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}async function le(i){if(i==="offset")return t=>t;const{normalize:e}=await b(async()=>{const{normalize:t}=await import("./time-zones-Ddu0PvRY.js");return{normalize:t}},__vite__mapDeps([0,1]));return e}async function re(i,e,t,o,l){if(t==="name"){const{groupByName:n}=await b(async()=>{const{groupByName:a}=await import("./index-DFrluMIY.js");return{groupByName:a}},__vite__mapDeps([2,0,1]));return(await n()).map(({label:a})=>({label:a,value:a,metadata:{filterValue:a}})).filter(a=>!!a).sort()}const u=l==="user"?i:l==="utc"?"fr":"en-GB",d=o.getTime();if(t==="region"){const[{groupByRegion:n},{getCountry:a,global:m}]=await Promise.all([b(()=>import("./index-mL0evDQ4.js"),__vite__mapDeps([3,0,1,4])),b(()=>import("./region-BWroGId0.js"),__vite__mapDeps([4,1]))]);return(await n()).map(({label:s,tzs:c})=>(c.sort((r,h)=>{const T=I(r,e),C=I(h,e),p="Etc/GMT";if(r.startsWith(p)&&h.startsWith(p)){const f=r.substring(p.length),P=h.substring(p.length),F=f===""?0:parseInt(f);return(P===""?0:parseInt(P))-F}return T.localeCompare(C)}),{label:_(e,s),items:c.map(r=>{const h=x(w(r,u,d)),T=I(r,e),C=s===m?`${I(m,e)} Etc`:B(r),p=a(r),f=_(e,p);return{label:T,value:r,metadata:{country:f===T?void 0:f,filterValue:C,offset:h}}})})).sort((s,c)=>s.label===m?-1:c.label===m?1:s.label.localeCompare(c.label))}const[{groupByOffset:Z},{DateEngine:R}]=await Promise.all([b(()=>import("./index-g4YtFzIU.js"),__vite__mapDeps([5,0,1,4])),b(()=>import("./index-Bx95W_6e.js"),[])]),E=await Z({dateEngine:new R,groupDateRange:1,startDate:new Date(d).toISOString()}),S=new Intl.ListFormat(i,{style:"long",type:"conjunction"}),D=["Factory","Etc/UTC"];return E.forEach(n=>{const a=[];let m=0;n.tzs.forEach((s,c)=>{D.includes(s)&&m++,a[c]=m}),n.tzs=n.tzs.filter(s=>!D.includes(s)),n.labelTzIdx=n.labelTzIdx.map(s=>s-a[s]).filter(s=>s>=0&&s<n.tzs.length)}),E.map(({labelTzIdx:n,tzs:a})=>{const m=a[0],s=x(w(m,u,d)),c=ae(m,d),r=n.map(h=>I(a[h],e));return{label:he(e,s,S.format(r)),value:c,metadata:{filterValue:a.map(h=>B(h))}}}).filter(n=>!!n).sort((n,a)=>n.value-a.value)}function I(i,e){return e[i]||ce(i)}function me(i,e,t){return t.timeZoneRegionLabel.replace("{city}",i).replace("{country}",_(t,e))}function _(i,e){return i[e]||e}function ce(i){return i.split("/").pop()}function B(i){return i.replace(/_/g," ")}function he(i,e,t){return i.timeZoneLabel.replace("{offset}",e).replace("{cities}",t)}function w(i,e,t=Date.now()){return i==="Factory"&&(i="Etc/GMT"),te(e,{timeZone:i,timeZoneName:"shortOffset"}).formatToParts(t).find(({type:o})=>o==="timeZoneName").value}function de(i){return i.items!==void 0}function ue(i){return de(i[0])?i.flatMap(e=>e.items):i}function z(i,e,t){return t==null?null:ue(i).find(o=>o[e]==t)}const pe=U`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}.offset{white-space:nowrap}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}`,v=class v extends M{constructor(){super(...arguments),this.clearable=!1,this.disabled=!1,this.maxItems=0,this.messages=ee({blocking:!0}),this.mode="offset",this.offsetStyle="user",this.open=!1,this.overlayPositioning="absolute",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputTimeZoneBeforeClose=g({cancelable:!1}),this.calciteInputTimeZoneBeforeOpen=g({cancelable:!1}),this.calciteInputTimeZoneChange=g({cancelable:!1}),this.calciteInputTimeZoneClose=g({cancelable:!1}),this.calciteInputTimeZoneOpen=g({cancelable:!1})}get value(){return this._value}set value(e){this._value=e}async setFocus(){await H(this),await this.comboboxEl.setFocus()}connectedCallback(){super.connectedCallback(),J(this),W(this)}async load(){this.normalizer=await le(this.mode),await this.updateTimeZoneItems();const e=this.value,t=this.normalizeValue(e);this.value=t||(e===""?t:void 0),this.updateTimeZoneSelection();const o=this.selectedTimeZoneItem?`${this.selectedTimeZoneItem.value}`:"";K(this,o),this.value=o}willUpdate(e){e.has("value")&&this.hasUpdated&&this.handleValueChange(this.value,e.get("value")),(e.has("messages")||e.has("mode")&&(this.hasUpdated||this.mode!=="offset")||e.has("referenceDate"))&&this.handleTimeZoneItemPropsChange(),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openChanged()}updated(){j(this)}loaded(){this.overrideSelectedLabelForRegion(this.open),this.openChanged()}disconnectedCallback(){super.disconnectedCallback(),X(this),q(this)}async handleTimeZoneItemPropsChange(){!this.timeZoneItems||!this.hasUpdated||(await this.updateTimeZoneItems(),this.updateTimeZoneSelection())}openChanged(){this.comboboxEl&&(this.comboboxEl.open=this.open)}async handleValueChange(e,t){const o=this.normalizeValue(e);if(!o){if(this.clearable){this._value=o,this.selectedTimeZoneItem=null;return}this._value=t,this.selectedTimeZoneItem=this.findTimeZoneItem(t);return}const l=this.findTimeZoneItem(o);if(!l){this._value=t;return}this._value=o,this.selectedTimeZoneItem=l,o!==e&&(await this.updateComplete,this.overrideSelectedLabelForRegion(this.open))}onLabelClick(){this.setFocus()}setComboboxRef(e){this.comboboxEl=e}overrideSelectedLabelForRegion(e){if(this.mode!=="region"||!this.selectedTimeZoneItem)return;const{label:t,metadata:o}=this.selectedTimeZoneItem;this.comboboxEl.selectedItems[0].textLabel=!o.country||e?t:me(t,o.country,this.messages)}onComboboxBeforeClose(e){e.stopPropagation(),this.overrideSelectedLabelForRegion(!1),this.calciteInputTimeZoneBeforeClose.emit()}onComboboxBeforeOpen(e){e.stopPropagation(),this.overrideSelectedLabelForRegion(!0),this.calciteInputTimeZoneBeforeOpen.emit()}onComboboxChange(e){e.stopPropagation();const t=e.target.selectedItems[0];if(!t){this._value="",this.selectedTimeZoneItem=null,this.calciteInputTimeZoneChange.emit();return}const o=this.findTimeZoneItemByLabel(t.getAttribute("data-label")),l=`${o.value}`;this.value===l&&o.label===this.selectedTimeZoneItem.label||(this._value=l,this.selectedTimeZoneItem=o,this.calciteInputTimeZoneChange.emit())}onComboboxClose(e){e.stopPropagation(),this.open=!1,this.calciteInputTimeZoneClose.emit()}onComboboxOpen(e){this.open=!0,e.stopPropagation(),this.calciteInputTimeZoneOpen.emit()}findTimeZoneItem(e){return z(this.timeZoneItems,"value",e)}findTimeZoneItemByLabel(e){return z(this.timeZoneItems,"label",e)}async updateTimeZoneItems(){this.timeZoneItems=await this.createTimeZoneItems()}updateTimeZoneSelection(){if(this.value===""&&this.clearable){this.selectedTimeZoneItem=null;return}const e=this.mode==="offset"?se():ne(),t=this.value===""||!this.value?e:this.value;this.selectedTimeZoneItem=this.findTimeZoneItem(t)||this.findTimeZoneItem(e)}async createTimeZoneItems(){return!this.messages._lang||!this.messages?[]:re(this.messages._lang,this.messages,this.mode,this.referenceDate instanceof Date?this.referenceDate:new Date(this.referenceDate??Date.now()),this.offsetStyle)}normalizeValue(e){return e=e===void 0?"":e,e&&this.normalizer(e)}render(){return Q({disabled:this.disabled,children:y`<calcite-combobox .clearDisabled=${!this.clearable} .disabled=${this.disabled} .label=${this.messages.chooseTimeZone} lang=${this.messages._lang??$} .maxItems=${this.maxItems} @calciteComboboxBeforeClose=${this.onComboboxBeforeClose} @calciteComboboxBeforeOpen=${this.onComboboxBeforeOpen} @calciteComboboxChange=${this.onComboboxChange} @calciteComboboxClose=${this.onComboboxClose} @calciteComboboxOpen=${this.onComboboxOpen} .overlayPositioning=${this.overlayPositioning} .placeholder=${this.mode==="name"?this.messages.namePlaceholder:this.mode==="offset"?this.messages.offsetPlaceholder:this.messages.regionPlaceholder} placeholder-icon=search .readOnly=${this.readOnly} .scale=${this.scale} .selectionMode=${this.clearable?"single":"single-persist"} .status=${this.status} .validationIcon=${this.validationIcon} .validationMessage=${this.validationMessage} ${N(this.setComboboxRef)}>${this.renderItems()}</calcite-combobox>${Y({component:this})}`})}renderItems(){return this.mode==="region"?this.renderRegionItems():L(this.timeZoneItems,({label:e})=>e,e=>{const t=this.selectedTimeZoneItem===e,{label:o,metadata:l,value:u}=e;return y`<calcite-combobox-item data-label=${o??$} .metadata=${l} .selected=${t} .textLabel=${o} .value=${u}></calcite-combobox-item>`})}renderRegionItems(){return this.timeZoneItems.flatMap(({label:e,items:t})=>G(e,y`<calcite-combobox-item-group .label=${e}>${L(t,({label:o})=>o,o=>{const l=this.selectedTimeZoneItem===o,{label:u,metadata:d,value:Z}=o;return y`<calcite-combobox-item data-label=${u??$} .description=${d.country} .metadata=${d} .selected=${l} .textLabel=${u} .value=${Z}><span class=${k(ie.offset)} slot=content-end>${d.offset}</span></calcite-combobox-item>`})}</calcite-combobox-item-group>`))}};v.properties={clearable:7,disabled:7,form:3,maxItems:11,messageOverrides:0,mode:3,name:3,offsetStyle:3,open:7,overlayPositioning:3,readOnly:7,referenceDate:1,required:7,scale:3,status:3,validationIcon:[3,{converter:V}],validationMessage:1,validity:0,value:1},v.shadowRootOptions={mode:"open",delegatesFocus:!0},v.styles=pe;let O=v;A("calcite-input-time-zone",O);export{O as InputTimeZone};
