import{aG as q,ge as $,aH as u,gf as Z}from"./index-D128Jkh1.js";import{m as j}from"./builderUtils-D2gCsnFG.js";function B(t){let n=0;const a=j(t);for(let s=0;s<t.paths.length;s++){const r=t.paths[s].length;for(let e=0;e<r;e++)e>0&&(n+=t.hasZ?w(t.paths[s][e-1],t.paths[s][e],a):g(t.paths[s][e-1],t.paths[s][e]))}return n}function C(t){const n=t.geometry.clone();return n.paths.map(a=>new q({spatialReference:t.geometry.spatialReference,paths:[a],hasZ:n.hasZ,hasM:n.hasM}))}function D(t){const n=[];for(const a of t.paths)for(let s=1;s<a.length;s++){const r=[[a[s-1].slice(),a[s].slice()]];n.push(new q({paths:r,spatialReference:t.spatialReference,hasZ:t.hasZ,hasM:t.hasM}))}return n}function b(t,n,a){let s=n[0]-t[0],r=n[1]-t[1];const e=Math.sqrt(s*s+r*r);return s/=e,r/=e,s*=a,r*=a,[t[0]+s,t[1]+r]}function k(t,n,a,s){const r=G([n[0]-t[0],n[1]-t[1],n[2]*s-t[2]*s]);return[t[0]+r[0]*a,t[1]+r[1]*a,t[2]+r[2]*a]}function v(t,n,a){const s=g(n[0],n[1]),r=t.x+a*((n[1][0]-n[0][0])/s),e=t.y+a*((n[1][1]-n[0][1])/s),o={};return t.hasM&&(o.m=t.m),new u({x:r,y:e,spatialReference:t.spatialReference,...o})}function z(t,n,a,s){const r=w(n[0],n[1],s),e=t.x+a*((n[1][0]-n[0][0])/r),o=t.y+a*((n[1][1]-n[0][1])/r),f=t.z+a*((n[1][2]-n[0][2])/r),i={};return t.hasM&&(i.m=t.m),new u({x:e,y:o,z:f,spatialReference:t.spatialReference,...i})}function x(t,n,a,s){return t===void 0||n===void 0||t===null||n===null?null:t+(n-t)/a*s}function g(t,n){const a=n[0]-t[0],s=n[1]-t[1];return Math.sqrt(a*a+s*s)}function w(t,n,a){return Math.sqrt((t[0]-n[0])**2+(t[1]-n[1])**2+(t[2]!==void 0&&n[2]!==void 0?(t[2]*a-n[2]*a)**2:0))}function G(t){const n=H(t);return[t[0]/n,t[1]/n,t[2]/n]}function R(t,n,a){const s=n[0],r=n[1],e=[r[0]-s[0],r[1]-s[1]],o=Math.sqrt(e[0]**2+e[1]**2),f=[e[0]/o,e[1]/o];return t.x+=a*f[0],t.y+=a*f[1],t}function E(t,n){let a=0,s=null;const r=t.hasM,e=t.hasZ?3:2;for(const o of t.paths){if(n===0){s=new u({x:o[0][0],y:o[0][1],...r?{m:o[0][e]}:{},spatialReference:t.spatialReference,hasM:r});break}for(let f=0;f<o.length-1;f++){const i=g(o[f],o[f+1]),l=a+i;if(l===n){s=new u({x:o[f+1][0],y:o[f+1][1],...r?{m:o[f+1][e]}:{},spatialReference:t.spatialReference,hasM:r});break}if(l>n){const c=b(o[f],o[f+1],n-a);s=new u({x:c[0],y:c[1],...r?{m:x(o[f][e],o[f+1][e],i,n-a)??void 0}:{},spatialReference:t.spatialReference,hasM:r});break}a+=i}if(s!==null)break}return s}function F(t,n,a){let s=0;const r=t.hasM;for(const e of t.paths){if(n===0)return new u({x:e[0][0],y:e[0][1],z:e[0][2],...r?{m:e[0][3]}:{},hasZ:!0,hasM:r,spatialReference:t.spatialReference});for(let o=0;o<e.length-1;o++){const f=w(e[o],e[o+1],a),i=s+f;if(i===n)return new u({x:e[o+1][0],y:e[o+1][1],z:e[o+1][2],...r?{m:e[o+1][3]}:{},hasZ:!0,hasM:r,spatialReference:t.spatialReference});if(i>n){const l=k(Z(e[o]),Z(e[o+1]),n-s,a);return new u({x:l[0],y:l[1],z:l[2],...r?{m:x(e[o][3],e[o+1][3],f,n-s)??void 0}:{},hasZ:!0,hasM:r,spatialReference:t.spatialReference})}s+=f}}return null}function I(t,n,a){let s=0,r=null;if(n<=0){const c=[t.paths[0][0],t.paths[0][1]];let h=y(t,0,0);return h=v(h,c,n),R(h,c,a)}const e=t.hasM?t.hasZ?3:2:-1;for(const c of t.paths)for(let h=0;h<c.length-1;h++){const M=g(c[h],c[h+1]),m=s+M;if(m===n)return r=new u({x:c[h+1][0],y:c[h+1][1],...t.hasM?{m:c[h+1][e]}:{},spatialReference:t.spatialReference}),a===0?r:R(r,[c[h],c[h+1]],a);if(m>n){const p=b(c[h],c[h+1],n-s);return r=new u({x:p[0],y:p[1],...e>-1?{m:x(c[h][e],c[h+1][e],M,n-s)??void 0}:{},spatialReference:t.spatialReference}),a===0?r:R(r,[c[h],c[h+1]],a)}s+=M}if(s===0)return null;const o=t.paths.length-1,f=t.paths[o].length-1,i=[t.paths[o][f-1],t.paths[o][f]];let l=y(t,o,f);return l=v(l,i,n-s),R(l,i,a)}function J(t,n,a,s){let r=0;if(n<=0){const c=[t.paths[0][0],t.paths[0][1]];let h=y(t,0,0);return h=z(h,c,n,s),R(h,c,a)}const e=t.hasM?t.hasZ?3:2:-1;for(const c of t.paths)for(let h=0;h<c.length-1;h++){const M=w(c[h],c[h+1],s),m=r+M;if(m===n){const p=new u({x:c[h+1][0],y:c[h+1][1],z:c[h+1][2],...t.hasM?{m:c[h+1][e]}:{},hasZ:!0,spatialReference:t.spatialReference});return a===0?p:R(p,[c[h],c[h+1]],a)}if(m>n){const p=k(Z(c[h]),Z(c[h+1]),n-r,s),d=new u({x:p[0],y:p[1],z:p[2],...e>-1?{m:x(c[h][e],c[h+1][e],M,n-r)}:{},hasZ:!0,spatialReference:t.spatialReference});return a===0?d:R(d,[c[h],c[h+1]],a)}r+=M}if(r===0)return null;const o=t.paths.length-1,f=t.paths[o].length-1,i=[t.paths[o][f-1],t.paths[o][f]];let l=y(t,o,f);return l=z(l,i,n-r,s),R(l,i,a)}function K(t,n,a){const s=t.rings[n][a];return new u({spatialReference:t.spatialReference,x:s[0],y:s[1],hasZ:t.hasZ,hasM:t.hasM,z:t.hasZ?s[2]:void 0,m:t.hasM?t.hasZ?s[3]:s[2]:void 0})}function y(t,n,a){const s=t.paths[n][a];return new u({spatialReference:t.spatialReference,x:s[0],y:s[1],hasZ:t.hasZ,hasM:t.hasM,z:t.hasZ?s[2]:void 0,m:t.hasM?t.hasZ?s[3]:s[2]:void 0})}function L(t){return $(t.at(0),t.at(-1))}function H(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}export{R as M,F as Z,y as d,J as g,D as i,w as m,C as o,B as r,g as u,L as v,K as w,I as x,E as y};
