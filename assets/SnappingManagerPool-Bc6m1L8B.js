import{jw as i,ej as s,D as u,F as c,V as p,jx as f,a3 as l,jy as d,jz as y}from"./index-Cd1DZZ4l.js";function g(t,e){const r=new i({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:e==null?void 0:e.distance,touchSensitivityMultiplier:(e==null?void 0:e.touchSensitivityMultiplier)??s.touchSensitivityMultiplier});return{...u(()=>{var n,a;return((a=(n=t.map)==null?void 0:n.allLayers)==null?void 0:a.toArray())??[]},n=>{r.featureSources=new p(n).map(a=>new f({layer:a}))},c),options:r}}const o=new Map;function M(t){if(!o.has(t)){const n=g(t,{distance:10}),a=v(t,n.options);o.set(t,{referenceCount:0,snappingManager:a,remove:()=>{n.remove(),a.destroy()}})}const e=o.get(t);e.referenceCount++;const r=l(()=>m(t,e));return{snappingManager:e.snappingManager,...r}}function m(t,e){e.referenceCount--,e.referenceCount>0||y(()=>{e.referenceCount===0&&(e.remove(),o.delete(t))})}function v(t,e){return new d({view:t,options:e})}export{M as a};
