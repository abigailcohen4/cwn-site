import{mi as B,b0 as nt,u as rt,a3 as Z,dp as N,uL as gt,uM as Mt,dg as tt,cb as I,df as j,qc as A,uN as d,uO as mt,kK as Y,qb as wt,cV as m,qd as q,dh as G,cW as M,mZ as ot,D as k,P as lt,J as f,cz as vt,uP as yt,g as At,uH as Tt,pv as z,uQ as St,uR as E,r as $,m as R,a as xt,dW as Ot,oE as Et,uS as bt,uT as $t,uU as Ct,c7 as V,uD as Dt,cM as Pt,ca as et,cS as Rt,c9 as at,cT as zt,jA as Lt,uV as It,w as jt,q as Ft}from"./index-BsXZDNwk.js";import{e as W,a as _,f as L}from"./ShadedColorMaterial.glsl-BPaSyAaw.js";import{M as ct,G as Wt}from"./dragEventPipeline3D-8zSCDRqk.js";import{f as Xt,g as Yt,p as J,M as ht,m as Ut,j as K,w as Nt}from"./InteractiveToolBase-CV8dCt59.js";import{A as ut}from"./ColorMaterial.glsl-CWAiJ7fW.js";import{M as pt}from"./ExtendedLineVisualElement-BjLWDsiZ.js";import{h as qt}from"./lineStippleUtils-C89mzWlO.js";var g;(function(n){n[n.TRANSLATE_Z=0]="TRANSLATE_Z",n[n.TRANSLATE_XY=1]="TRANSLATE_XY",n[n.SCALE=2]="SCALE",n[n.ROTATE=3]="ROTATE",n[n.SCALE_ROTATE=4]="SCALE_ROTATE"})(g||(g={}));let X=class{constructor(){this._available=!0}set location(t){this._forEachManipulator3D(e=>e.location=t)}set elevationAlignedLocation(t){this._forEachManipulator3D(e=>e.elevationAlignedLocation=t)}set elevationInfo(t){this._forEachManipulator3D(e=>e.elevationInfo=t)}get renderLocation(){let t;return this._forEachManipulator3D(e=>{t||(t=e.renderLocation)}),t}set renderLocation(t){this._forEachManipulator3D(e=>e.renderLocation=t)}get available(){return this._available}set available(t){this._available=t,this._forEachManipulator3D(e=>e.available=t)}get hovering(){return this.someManipulator(t=>t.hovering)}get grabbing(){return this.someManipulator(t=>t.grabbing)}get dragging(){return this.someManipulator(t=>t.dragging)}get selected(){return this.someManipulator(t=>t.selected)}hasManipulator(t){return this.someManipulator(e=>e===t)}someManipulator(t){let e=!1;return this.forEachManipulator(a=>{!e&&t(a)&&(e=!0)}),e}_forEachManipulator3D(t){this.forEachManipulator((e,a)=>{e instanceof W&&t(e,a)})}},Ht=class extends X{constructor(){super(...arguments),this._interactive=!0}get interactive(){return this._interactive}set interactive(t){this._interactive!==t&&(this._interactive=t),this._updateManipulatorInteractivity()}_updateManipulatorInteractivity(){const t=!this.grabbing&&this._interactive;this.forEachManipulator(e=>{e.interactive=t||e.grabbing})}};const Bt=128,w=70,Zt=80,dt=.02,Gt=54,kt=100,Vt=Math.ceil(w/3*2),_t=160,ve=.5,ye=24,Ae=9,Te=_t+30,Se=_t+53,xe=60,Oe=23,Ee=5*Math.PI/12,be=1*Math.PI/3,$e=10,Ce=.2,De=30,Pe=53,Re=.2,ze=.3,Le=200,Ie=3,je=1e6;function Q(n,t,e){const a=(i,s)=>{t({action:i,object:n,dxScreen:s.screenDeltaX,dyScreen:s.screenDeltaY})};return e((i,s,o)=>(s.next(r=>(r.action==="start"&&a("start",r),r)).next(Xt(n)).next(r=>{switch(r.action){case"start":case"update":(r.translationX||r.translationY||r.translationZ)&&a("update",r);break;case"end":a("end",r)}return r}),{steps:s,cancel:o=o.next(Yt(n)).next(r=>(a("end",{screenDeltaX:0,screenDeltaY:0}),r))}))}function Fe(n){if((n==null?void 0:n.axis)==null)return 1;const{mapStart:t,mapEnd:e,axis:a}=n,i=[e.x-t.x,e.y-t.y];return i[0]*a[0]+i[1]*a[1]>0?1:-1}let Jt=class extends X{constructor(t){super(),this._handles=new B,this._arrowManipulatorInfos=new Array,this._angle=0,this._scale=1,this._radius=w,this._updateAfterDrag=!1,this.events=new nt,this._tool=t.tool,this._view=t.view,this._opaqueMaterial=this._createMaterial(),this._transparentMaterial=this._createMaterial(.5),t.radius!=null&&(this._radius=t.radius),this._createManipulators(),this.forEachManipulator(e=>this._tool.manipulators.add(e))}set orthogonalAvailable(t){this._arrowManipulatorInfos.length>=3&&(this._arrowManipulatorInfos[1].manipulator.available=t,this._arrowManipulatorInfos[3].manipulator.available=t)}destroy(){this._handles=rt(this._handles),this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._tool=null,this._view=null,this._arrowManipulatorInfos.length=0}forEachManipulator(t){for(const{manipulator:e}of this._arrowManipulatorInfos)t(e,g.TRANSLATE_XY)}createManipulatedObjectDragPipeline(t,e,a){if(!e.operations)return Z();const i=e.operations.data.spatialReference,s=e.graphic;return Q(e,a,o=>this.createDragPipeline((r,l,c,h,u)=>({steps:l,cancel:c}=t(r,l,c,h,u),o(r,l,c)),e.elevationInfo,i,s))}createDragPipeline(t,e,a,i){return N(this._arrowManipulatorInfos.map(({manipulator:s},o)=>J(s,(r,l,c,h,u)=>{const p=l.next(v=>({...v,manipulatorType:g.TRANSLATE_XY})).next(ht(this._view,r.elevationAlignedLocation)).next(ct(this._view,r.elevationAlignedLocation,e,a,i)).next(Ut(r.location,this.angle+(o+1)*Math.PI*.5)).next(K());t(r,p,c,h,u)})))}get angle(){return this._angle}set angle(t){this._angle=t,this.dragging?this._updateAfterDrag=!0:this._updateManipulatorTransform()}get displayScale(){return this._scale}set displayScale(t){this._scale=t,this._updateManipulatorTransform()}get radius(){return this._radius}set radius(t){this._radius!==t&&(this._radius=t,this._updateManipulators())}_updateManipulators(){for(let t=0;t<this._arrowManipulatorInfos.length;t++)this._updateArrowManipulator(this._arrowManipulatorInfos[t],t);this._updateManipulatorTransform()}_updateArrowManipulator({manipulator:t,transform:e},a){const i=this._radius/w,s=Gt*i,o=s*Math.sqrt(3)/2,r=gt(this._opaqueMaterial,o,s/2,s/2,dt);Mt(r,tt(A.get(),I(j.get(),0,-o/3,0))),t.renderObjects=[new _(r,d.Focused),new _(r.instantiate({material:this._transparentMaterial}),d.Unfocused)],t.radius=o/3*2*1.2;const l=mt(A.get(),a*Math.PI/2),c=tt(A.get(),I(j.get(),0,kt*i,0));Y(e,l,c)}_createManipulators(){for(let t=0;t<4;t++){const e=this._createArrowManipulator(t);this._arrowManipulatorInfos.push(e)}this._updateManipulatorTransform()}_updateManipulatorTransform(){const t=this.angle,e=wt(A.get(),t,m(0,0,1));if(e==null)return;const a=q(A.get(),I(j.get(),this.displayScale,this.displayScale,this.displayScale)),i=Y(A.get(),a,e);for(const s of this._arrowManipulatorInfos){const o=Y(A.get(),i,s.transform);s.manipulator.modelTransform=o}}_createArrowManipulator(t){const e=new W({view:this._view,autoScaleRenderObjects:!1,worldOriented:!0,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:m(0,0,1)}}),a={manipulator:e,transform:G()};return this._updateArrowManipulator(a,t),this._handles.add(e.events.on("drag",i=>{this._updateAfterDrag&&i.action==="end"&&!this.dragging&&(this._updateManipulatorTransform(),this._updateAfterDrag=!1)})),a}_createMaterial(t=1){const e=new ut({cullFace:ot.Back,renderOccluded:M.Transparent,isDecoration:!0});return this._handles.add(k(()=>f.toUnitRGBA(this._view.effectiveTheme.accentColor),a=>{a[3]*=t,e.setParameters({color:a})},lt)),e}get test(){}};class Kt{constructor(){this._view=null,this._elevationInfo=null,this._lastDragEvent=null,this._next=null,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&this._lastDragEvent!=null&&this._next!=null){const e=this._lastDragEvent.mapEnd,a=this._snap(this._lastDragEvent.screenEnd);if(a!=null){const i={action:"update",mapStart:this._lastDragEvent.mapStart,mapEnd:t===!0?a:e,screenStart:this._lastDragEvent.screenEnd,screenEnd:this._lastDragEvent.screenEnd};this._next.execute(i)}}this._enabled=t}_snap(t){const e=this._view!=null?this._view.toMap(t,{exclude:[]}):null;return e!=null&&this._view!=null&&(e.z=vt(e,this._view,this._elevationInfo)),e}createDragEventPipelineStep(t,e){this._view=t,this._elevationInfo=e,this._lastDragEvent=null;const a=new Nt;return this._next=a,[i=>{if(this._lastDragEvent=i.action!=="end"?{...i}:null,this._enabled){const s=this._snap(i.screenEnd);return s!=null?{action:i.action,mapStart:i.mapStart,mapEnd:s,screenStart:i.screenStart,screenEnd:i.screenEnd}:null}return{action:i.action,mapStart:i.mapStart,mapEnd:i.mapEnd,screenStart:i.screenStart,screenEnd:i.screenEnd}},a]}}let Qt=class extends X{constructor(t){super(),this._handles=new B,this._snapToScene=new Kt,this._scale=1,this._radius=w,this._view=t.view,this._tool=t.tool,this._discMaterial=this._createMaterial(),this._discMaterialTransparent=this._createMaterial(.5),t.snapToScene!=null&&(this.snapToScene=t.snapToScene),t.radius!=null&&(this._radius=t.radius),this._createManipulator(),this.forEachManipulator(e=>this._tool.manipulators.add(e))}destroy(){this._handles=rt(this._handles),this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._tool=null,this._view=null,this._manipulator=null}forEachManipulator(t){t(this._manipulator,g.TRANSLATE_XY)}get displayScale(){return this._scale}set displayScale(t){this._scale=t,this._updateManipulatorTransform()}get snapToScene(){return this._snapToScene.enabled}set snapToScene(t){this._snapToScene.enabled=t}get radius(){return this._radius}set radius(t){t!==this._radius&&(this._radius=t,this._updateManipulator())}get discManipulator(){return this._manipulator}createManipulatedObjectDragPipeline(t,e,a){if(!e.operations)return Z();const i=e.graphic,s=e.elevationInfo,o=e.operations.data.spatialReference;return Q(e,a,r=>this.createDragPipeline((l,c,h,u,p)=>({steps:c,cancel:h}=t(l,c,h,u,p),r(l,c,h)),s,o,i))}createDragPipeline(t,e,a,i){const s=this._view;return J(this._manipulator,(o,r,l,c,h)=>{const u=r.next(ht(s,o.elevationAlignedLocation)).next(ct(s,o.elevationAlignedLocation,e,a,i)).next(...this._snapToScene.createDragEventPipelineStep(s,e)).next(p=>({...p,manipulatorType:g.TRANSLATE_XY})).next(K());t(o,u,l,c,h)})}_updateManipulatorTransform(){const t=q(A.get(),I(j.get(),this.displayScale,this.displayScale,this.displayScale));this._manipulator.modelTransform=t}_createManipulator(){const t=this._view;this._manipulator=new W({view:t,worldSized:!1,autoScaleRenderObjects:!1,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:m(0,0,1)},worldOriented:!0}),this._updateManipulator()}_updateManipulator(){const t=yt(this._discMaterial,dt,1,Bt,m(0,0,1),m(0,0,0));t.transformation=q(G(),m(this._radius,this._radius,this._radius)),this._manipulator.renderObjects=[new _(t,d.Focused),new _(t.instantiate({material:this._discMaterialTransparent}),d.Unfocused)],this._manipulator.radius=Zt*(this._radius/w)}_createMaterial(t=1){const e=new ut({cullFace:ot.Back,renderOccluded:M.Transparent,isDecoration:!0});return this._handles.add(k(()=>f.toUnitRGBA(this._view.effectiveTheme.accentColor),a=>{a[3]*=t,e.setParameters({color:a})},lt)),e}get test(){}};const D=.3;function P(n,t){t&&Object.assign(n,t)}class te{constructor(t){this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=M.Opaque,this.color=t.accent}}class U{constructor({colors:t,...e}){this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=t.accent,this.outlineColor=t.outline,this.renderOccluded=M.Opaque,this.hoverOutlineColor=t.selectedOutline,P(this,e)}applyColor(t){this._apply(this.color,t)}applyOutline(t){this._apply(this.outlineColor,t)}applyHoverOutline(t){this._apply(this.hoverOutlineColor,t)}_apply(t,e){e.setParameters({color:E(t),renderOccluded:this.renderOccluded})}}class ee{constructor({colors:t,...e}){this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.renderOccluded=M.Transparent,this.minSquaredEdgeLength=900,this.color=z(t.accent,.5),this.hoverColor=t.accent,P(this,e)}applyColor(t){this._apply(this.color,t)}applyHover(t){this._apply(this.hoverColor,t)}_apply(t,e){e.setParameters({color:E(t),renderOccluded:this.renderOccluded})}}let ae=class{constructor(t){this.vertex=new U({colors:t,color:t.accent,outlineColor:t.outline}),this.edge=new U({colors:t,color:St(z(t.accent,2/3),.5),outlineColor:z(t.outline,.5),size:8,collisionPadding:8}),this.selected=new U({colors:t,color:t.selected,outlineColor:t.outline}),this.edgeOffset=new ee({colors:t})}};class H{constructor({colors:t,...e}){this.width=1.5,this.stipplePattern=qt(3.3),this.falloff=0,this.innerWidth=1.5,this.renderOccluded=M.OccludeAndTransparent,this.color=t.selected,this.stippleOffColor=t.outline,this.innerColor=t.selected,P(this,e)}apply(t){t.color=E(this.color),t.width=this.width,t.stipplePattern=this.stipplePattern,t.stippleOffColor=E(this.stippleOffColor),t.falloff=this.falloff,t.innerWidth=this.innerWidth,t.innerColor=E(this.innerColor),t.renderOccluded=this.renderOccluded}}class ie{constructor({colors:t,...e}){this.size=4,this.outlineSize=1,this.shape="square",this.color=t.selected,this.outlineColor=t.outline,P(this,e)}apply(t){t.color=E(this.color),t.size=this.size,t.outlineSize=this.outlineSize,t.outlineColor=E(this.outlineColor),t.primitive=this.shape}}class F{constructor({colors:t,...e}){this.innerWidth=1,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=D,this.globalAlphaContrastBoost=1.5,this.radius=3,this.innerColor=t.selected,this.glowColor=t.accent,this.heightFillColor=t.accent,P(this,e)}apply(t,e=1){const a={glowColor:f.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:f.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*e*this.glowColor.a,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in t?t.style=a:t.laserlineStyle=a}}class se{constructor(t){this.outline=new H({colors:t,color:t.stippleOff,renderOccluded:M.OccludeAndTransparentStencil,stippleOffColor:t.stippleOn,innerWidth:0}),this.staged=new H({colors:t,color:t.stippleOn,renderOccluded:M.OccludeAndTransparentStencil,innerColor:t.stagedSolid,stippleOffColor:t.stippleOff}),this.shadowStyle=new F({colors:t,globalAlpha:D,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:1})}}class ne{constructor(t){this.outline=new ie({colors:t,color:t.selected,outlineColor:t.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new F({colors:t,globalAlpha:D,glowColor:t.accent,glowFalloff:1.5,glowWidth:6,innerColor:t.selected,innerWidth:1,radius:2})}}class re extends H{constructor({colors:t,...e}){super({colors:t}),this.extensionType=pt.GROUND_RAY,P(this,e)}}let oe=class{constructor(t){this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,this.lineObjects=new se(t),this.pointObjects=new ne(t),this.heightPlane=new F({colors:t,globalAlpha:D,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:1}),this.heightBox=new F({colors:t,globalAlpha:D,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:0,heightFillColor:t.accent}),this.zVerticalLine=new re({colors:t,color:z(t.accent,5*D/3),falloff:2,innerColor:z(t.selected,0),renderOccluded:M.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:pt.GROUND_RAY})}},T=class extends At{constructor(n){super(n)}get colors(){const n=this.getTheme().accentColor,t=n.a;return{accent:n,contrast:Tt(n),selected:f.fromArray([255,255,255,t]),selectedOutline:f.fromArray([255,255,255,t]),staged:f.fromArray([12,207,255,t]),stagedSolid:f.fromArray([12,207,255,1]),outline:f.fromArray([0,0,0,.5*t]),stippleOn:f.fromArray([255,255,255,1]),stippleOff:f.fromArray([0,0,0,.5])}}get visualElements(){return new oe(this.colors)}get manipulators(){return new ae(this.colors)}get zManipulator(){return new te(this.colors)}};$([R()],T.prototype,"colors",null),$([R()],T.prototype,"visualElements",null),$([R()],T.prototype,"manipulators",null),$([R()],T.prototype,"zManipulator",null),$([R()],T.prototype,"getTheme",void 0),T=$([xt("esri.views.3d.interactive.editingTools.settings")],T);class le extends X{constructor(t){super(),this._radius=w,this.events=new nt,this._tool=t.tool,this._view=t.view;const e=new T({getTheme:()=>this._view.effectiveTheme});this._settings=e,t.radius!=null&&(this._radius=t.radius);const a=this._view.effectiveTheme.accentColor;this._materials={materialUnfocused:L(y(a,1,.25),M.Occlude),materialFocused:L(y(a,1,0),M.Occlude),materialOccludedUnfocused:L(y(a,.7,0),e.zManipulator.renderOccluded),materialOccludedFocused:L(y(a,.85,0),e.zManipulator.renderOccluded)},this._themeHandle=k(()=>this._view.effectiveTheme.accentColor,i=>{const s=y(i,1,.25),o=y(i,1,0),r=y(i,.7,0),l=y(i,.85,0),{materialUnfocused:c,materialFocused:h,materialOccludedUnfocused:u,materialOccludedFocused:p}=this._materials;c.setParameters({color:s}),h.setParameters({color:o}),u.setParameters({color:r}),p.setParameters({color:l})}),this._createManipulator(),this.forEachManipulator(i=>this._tool.manipulators.add(i))}destroy(){this._themeHandle=Ot(this._themeHandle),this._manipulator.applyObjectTransform=he,this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()})}forEachManipulator(t){t(this._manipulator,g.TRANSLATE_Z)}createManipulatedObjectDragPipeline(t,e,a){if(!e.operations)return Z();const i=e.operations.data.spatialReference;return Q(e,a,s=>this.createDragPipeline((o,r,l,c,h)=>({steps:r,cancel:l}=t(o,r,l,c,h),s(o,r,l)),i))}createDragPipeline(t,e){const a=this._view;return J(this._manipulator,(i,s,o,r,l)=>{const c=s.next(h=>({...h,manipulatorType:g.TRANSLATE_Z})).next(Wt(a,i.renderLocation,e)).next(K());t(i,c,o,r,l)})}get radius(){return this._radius}set radius(t){t!==this._radius&&(this._radius=t,this._updateManipulator())}_updateManipulator(){const t=this._settings,e=this._radius/w,a=t.zManipulator.height*e,i=t.zManipulator.coneHeight*e,s=t.zManipulator.coneWidth*e,o=t.zManipulator.width*e,r=[m(0,0,0),m(0,0,a)],l=[m(0,0,0),m(0,0,a+i)],c=(()=>{const O=G();return Et(O,O,[0,0,a]),bt(O,O,Math.PI/2),O})(),{materialUnfocused:h,materialFocused:u,materialOccludedUnfocused:p,materialOccludedFocused:v}=this._materials,b=$t(h,r,o/2,16,!1),x=Ct(h,i,s/2,16,!1);x.transformation=c,this._manipulator.renderObjects=[new _(x,d.Unfocused),new _(b,d.Unfocused),new _(x.instantiate({material:u}),d.Focused),new _(b.instantiate({material:u}),d.Focused),new _(x.instantiate({material:p}),d.Unfocused),new _(b.instantiate({material:p}),d.Unfocused),new _(x.instantiate({material:v}),d.Focused),new _(b.instantiate({material:v}),d.Focused)],this._manipulator.radius=o/2+2,this._manipulator.collisionType={type:"line",paths:[l]}}_createManipulator(){const t=this._view,e=new W({view:t,autoScaleRenderObjects:!1,worldSized:!1,selectable:!1,cursor:"ns-resize",elevationInfo:this.elevationInfo,worldOriented:!0,collisionPriority:1.6});e.applyObjectTransform=a=>{const i=t.state.camera,s=it;t.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation,s);const o=Dt(i.eye,s),r=i.computeRenderPixelSizeAtDist(o),l=Pt(C,s,i.eye);et(l,l);const c=ce;t.renderCoordsHelper.worldUpAtPosition(it,c);const h=Math.abs(Rt(l,c)),u=at(C,l,c),p=at(C,u,c),v=Lt(h,.01,1),b=1-Math.sqrt(1-v*v)/v/i.fullWidth,x=this._settings,O=this._radius/w,ft=x.zManipulator.width*O;zt(p,et(p,p),(1/b-1)*o+r*ft),a[12]-=C[0],a[13]-=C[1],a[14]-=C[2]},this._manipulator=e,this._updateManipulator()}get test(){}}function y(n,t,e){const a=It(n,e);return a.a*=t,f.toUnitRGBA(a)}const it=V(),C=V(),ce=V(),he=()=>{};class Ne extends Ht{constructor(t){super(),this._handles=new B;const{tool:e,view:a,snapToScene:i,radius:s}=t;this._view=a,this.xyManipulation=new Qt({tool:e,view:a,snapToScene:i,radius:s}),this.xyAxisManipulation=new Jt({tool:e,view:a,radius:s}),this.zManipulation=new le({tool:e,view:a,radius:s}),this.xyManipulation.available=t.xyAvailable,this.xyAxisManipulation.available=t.xyAxisAvailable,this.zManipulation.available=t.zAvailable,this._autoHideXYAxis(),this.forEachManipulator(o=>this._handles.add(o.events.on("grab-changed",()=>this._updateManipulatorInteractivity())))}destroy(){this._handles.destroy(),this.xyManipulation.destroy(),this.xyAxisManipulation.destroy(),this.zManipulation.destroy()}createManipulatedObjectDragPipeline(t,e,a){return N([this.xyManipulation.createManipulatedObjectDragPipeline((i,s,o,r,l)=>t(S.XY,i,s,o,r,l),e,a),this.xyAxisManipulation.createManipulatedObjectDragPipeline((i,s,o,r,l)=>t(S.XY_AXIS,i,s,o,r,l),e,a),this.zManipulation.createManipulatedObjectDragPipeline((i,s,o,r,l)=>t(S.Z,i,s,o,r,l),e,a)])}createDragPipeline(t,e,a,i){return N([this.xyManipulation.createDragPipeline((s,o,r,l,c)=>t(S.XY,s,o,r,l,c),e,a,i),this.xyAxisManipulation.createDragPipeline((s,o,r,l,c)=>t(S.XY_AXIS,s,o,r,l,c),e,a,i),this.zManipulation.createDragPipeline((s,o,r,l,c)=>t(S.Z,s,o,r,l,c),a)])}set snapToScene(t){this.xyManipulation.snapToScene=t}set angle(t){this.xyAxisManipulation.angle=t}set radius(t){this.xyAxisManipulation.radius=t,this.xyManipulation.radius=t,this.zManipulation.radius=t}set displayScale(t){this.xyManipulation.displayScale=t,this.xyAxisManipulation.displayScale=t}forEachManipulator(t){this.xyManipulation.forEachManipulator(e=>t(e,g.TRANSLATE_XY)),this.xyAxisManipulation.forEachManipulator(e=>t(e,g.TRANSLATE_XY)),this.zManipulation.forEachManipulator(e=>t(e,g.TRANSLATE_Z))}get _xyAxisVisible(){const t=this.xyManipulation.someManipulator(e=>e.focused)||this.xyAxisManipulation.someManipulator(e=>e.focused);return this._view.inputManager&&this._view.inputManager.latestPointerType==="touch"||t}_autoHideXYAxis(){const t=this.xyAxisManipulation,e=this.xyManipulation;if(jt("esri-mobile"))return;const a=[];e.forEachManipulator(s=>a.push(s)),t.forEachManipulator(s=>a.push(s));const i=()=>{const s=[];this._xyAxisVisible||t.forEachManipulator(o=>s.push(o.disableDisplay())),this._handles.remove(st),this._handles.add(s,st)};for(const s of a)this._handles.add(s.events.on("focus-changed",i));this._view.inputManager&&this._handles.add(Ft(()=>{var s;return(s=this._view.inputManager)==null?void 0:s.latestPointerType},i)),i()}static radiusForSymbol(t){const e=t!=null&&t.type==="point-3d"&&t.symbolLayers;return e&&e.some(a=>a.type==="icon")?Vt:w}}const st="disable-xy-axis-display";var S;(function(n){n[n.XY=0]="XY",n[n.XY_AXIS=1]="XY_AXIS",n[n.Z=2]="Z"})(S||(S={}));export{g as A,Ht as B,_t as I,ve as P,w as a,Fe as b,S as c,Te as d,Pe as e,Ce as f,De as g,Bt as h,ye as i,T as j,be as k,Ae as l,ze as m,Q as n,Vt as o,Se as p,Le as q,xe as r,Oe as s,X as t,Ne as u,Re as v,$e as w,Ee as x,Ie as y,je as z};
