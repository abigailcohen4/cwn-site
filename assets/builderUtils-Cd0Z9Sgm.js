import{fV as f,e as u,fY as c,bS as p,fW as h,fX as m,e9 as d,bL as b,bV as g,j as v}from"./index-CndJoalP.js";import{createPresetServiceEdit as y}from"./createPresetServiceEdit-CgseHrcJ.js";function k({edits:t,mode:e,relationships:n,shape:a,templatePart:o},r=""){if(o===null)return;const{template:s}=o;if(!f(s))throw new u("shared-template:template-not-loaded","A template part's template must be loaded before use");if(c(s)){if(!p(a))throw new u("shared-template:invalid-geometry","Preset templates must have a point geometry");y({geometry:a,template:s,edits:t,relationships:n,rotation:0,mode:e,tag:r})}else h(s)&&m({geometry:a,template:s,edits:t,relationships:n,tag:r})}function V(t,e){if(!t||!g(t))return null;if(!e.hasZ&&!e.hasM)return t;let n=null,a=null;const o=e.hasZ&&e.hasM?3:2;switch(e.type){case"point":n=e.hasZ?e.z:null,a=e.hasM?e.m:null;break;case"polygon":case"polyline":{const s=e.type==="polygon"?e.rings:e.paths;for(const i of s)for(const l of i)e.hasZ&&(n===null||l[2]>n)&&(n=l[2]),e.hasM&&(a===null||l[o]>a)&&(a=l[o])}break;case"multipoint":for(const s of e.points)e.hasZ&&(n===null||s[2]>n)&&(n=s[2]),e.hasM&&(a===null||s[o]>a)&&(a=s[o]);break;default:return t}const r=M(t.rings,e.hasZ,e.hasM,n,a);return new v({rings:r,spatialReference:t.spatialReference,hasZ:e.hasZ,hasM:e.hasM})}function P(t){let e=1;return(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(e=d(t.spatialReference)/b(t.spatialReference)),e}function $(t){let e=!1;return t.byNumber!==void 0&&(e=t.byNumber===!0),e}function j(t){let e=0;return t.count!==void 0&&(e=t.count),e}function W(t,e){let n=0;return e?t.proportional!==void 0&&(n=t.proportional):t.distanceValue!==void 0&&(n=t.distanceValue),e&&(n/=100),n}function x(t){return t.isProportional===!0}function A(t){return t.createUnique!==!1}function D(t){let e=0;return t.offsetDistance!==void 0&&(e=t.offsetDistance),t.side!==void 0&&t.side===1&&(e*=-1),e}function N(t){return t.vertexBeforeOffset===!0}function M(t,e,n,a,o){const r=[];for(const s of t)r.push(Z(s,e,n,a,o));return r}function Z(t,e,n,a,o){const r=[];for(const s of t){const i=[s[0],s[1]];e&&(i[2]=a),n&&(i[e?3:2]=o),r.push(i)}return r}export{D as b,V as c,j as d,k as f,W as g,$ as h,N as j,P as m,A as v,x as y};
