import{m as L,f as M}from"./builderUtils-B-5Q1cLT.js";import{m as I,u as S,g as U,x as W,d as z,M as D,r as q}from"./shapeUtils-1mjmDPYf.js";import{bW as $,fU as O}from"./index-BHbsz6E7.js";import{m as w}from"./offsetOperator-B364ts48.js";var N,l;function H({templatePart:i,edits:r,relationships:u,shape:d,distance:g,isProportional:B,offsetDistance:s,vertexBeforeOffset:A,vertexPlacement:a,mode:v}){const t=A||s===0?d:k(d,s);if(t===null||!$(t))return;const c=L(t);s=A?s:0;let o=0,p=null,h=0;for(let e=0;e<t.paths.length;e++){if(r.length>O&&v==="digitizing")return;const f=t.paths[e].length,V=e===t.paths.length-1;for(let n=0;n<f;n++){if(r.length>O&&v==="digitizing")return;if(n>0&&g!==0&&(o+=t.hasZ?I(t.paths[e][n-1],t.paths[e][n],c):S(t.paths[e][n-1],t.paths[e][n])),(n!==0||a!==N.NotBeginning)&&!(n===f-1&&a===N.NotEnd&&V||(n===0||n===f-1&&V)&&a===N.Interior||n===0&&g<0&&B||n===f-1&&g>0&&B)){if(g!==0){let E=1;if(B){const Z=g<0?n-1:n+1;if(Z>=f||Z<0)continue;E=t.hasZ?I(t.paths[e][n],t.paths[e][Z],c):S(t.paths[e][n],t.paths[e][Z])}const m=o+E*g;p=t.hasZ?U(t,m,s,c):W(t,m,0)}else p=z(t,e,n),s!==0&&(p=D(p,n===f-1?[t.paths[e][n-1],t.paths[e][n]]:[t.paths[e][n],t.paths[e][n+1]],s));p&&M({templatePart:i,shape:p,edits:r,relationships:u,mode:v},`V${(h+n).toString()}`)}}h+=f}}function k(i,r){return w(i,r,{unit:"meters",joins:"miter",miterLimit:2})}function b(i){let r=0;for(const u of i.paths)r+=u.length;return r}function J({templatePart:i,edits:r,relationships:u,shape:d,distance:g,isProportional:B,offsetDistance:s,vertexBeforeOffset:A,vertexPlacement:a,mode:v}){const t=A||s===0?d:k(d,s);if(t===null||!$(t))return;const c=L(t);s=A?s:0;let o=null,p="";if(g!==0){const h=a===l.AtBeginning?0:t.paths.length-1,e=a===l.AtBeginning?0:t.paths[t.paths.length-1].length-1,f=a===l.AtBeginning?0:q(t),V=a===l.AtBeginning?t.paths[0].length:t.paths[t.paths.length-1].length;let n=1;if(B){const m=g<0?e-1:e+1;if(m>=V||m<0)return;n=t.hasZ?I(t.paths[h][e],t.paths[h][m],c):S(t.paths[h][e],t.paths[h][m])}const E=f+n*g;o=t.hasZ?U(t,E,s,c):W(t,E,s),p=a===l.AtBeginning?"V0":`V${(b(t)-1).toString()}`}else{if(o=a===l.AtBeginning?z(t,0,0):z(t,t.paths.length-1,t.paths[t.paths.length-1].length-1),s!==0)if(a===l.AtBeginning)o=D(o,[t.paths[0][0],t.paths[0][1]],s);else{const h=t.paths[t.paths.length-1];o=D(o,[h[h.length-2],h[h.length-1]],s)}p=a===l.AtBeginning?"V0":`V${(b(t)-1).toString()}`}o&&M({templatePart:i,shape:o,edits:r,relationships:u,mode:v},p)}(function(i){i[i.All=0]="All",i[i.NotBeginning=1]="NotBeginning",i[i.NotEnd=2]="NotEnd",i[i.Interior=3]="Interior"})(N||(N={})),function(i){i[i.AtBeginning=4]="AtBeginning",i[i.AtEnd=5]="AtEnd"}(l||(l={}));export{J as B,l as c,N as f,H as m,k as u};
